@model GameViewData
@using System.Linq
@{
    ViewData["Title"] = "Results";
    ViewData["help_Text"] = @"
       In the Games page you can find a selection of games,<br/>
       this being the most popular or if you searched a especific<br/>
       name the games matching what you search will show in here!<br/>
       You can go further and search a game and then filter in: <br/>
       <ul>
          <li>Category</li>
          <li>Rating</li>
          <li>Year</li>
          <li>Platform</li>
        </ul>
       And search for the game you really want!";
}

@{
    var batchSize = 5; // Defina o tamanho do lote aqui
    var batches = Model.Games.Select((game, index) => new { Game = game, Index = index })
                       .GroupBy(x => x.Index / batchSize)
                       .Select(g => g.Select(x => x.Game));
}
@if (SignInManager.IsSignedIn(User))
{

    <div class="results-game">
        <h2 style="color:white">Games</h2>
        <hr class="bar" style="margin-bottom: 25px; width: 100%;">
        <div class="d-flex main-section-result">
            <div class="filter-section">
                <form asp-controller="Games" asp-action="Index" method="get">
                    <h4 style="color: white; margin-bottom:50px">Filters</h4>
                    <select class="search_select_box select-results" name="releasePlatform" id="releasePlatform">
                        <option value="" selected disabled hidden>Platform</option>
                        @foreach (var item in Model.Platforms)
                        {
                            <option value="@item.PlatformName">@item.PlatformName</option>
                        }
                    </select><br>
                    <select class="select-results" name="genre" id="genre" >
                        <option value="" selected disabled hidden>Genre</option>
                        @foreach (var item in Model.Genres)
                        {
                            <option value="@item.GenreName">@item.GenreName</option>
                        }
                    </select><br>
                    <button class="btn btn-primary nav-btn-2" type="submit">Apply Filters</button>
                </form>
                <a class="clear-results" href="" style="color:white; font-size: 120%; margin-top:25px">Clear Filters</a>
            </div>
            <div class="game-section">

                @foreach (var batch in batches)
                {
                    <div class="game-row">
                        @foreach (var game in batch)
                        {
                            <a class="game-button" asp-controller="Games" asp-action="Details" asp-route-id="@game.IgdbId">
                                <img src="@game.ImageUrl">
                            </a>
                        }
                    </div>
                }
            </div>

        </div>


    </div>
}
else
{
    <h1 style="color :red">Please log in to access this page.</h1>
}